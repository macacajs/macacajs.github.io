(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{307:function(a,t,s){"use strict";s.r(t);var n=s(13),r=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"上手指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上手指南"}},[a._v("#")]),a._v(" 上手指南")]),a._v(" "),t("h2",{attrs:{id:"运行官方示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行官方示例"}},[a._v("#")]),a._v(" 运行官方示例")]),a._v(" "),t("p",[a._v("将官方示例("),t("a",{attrs:{href:"//github.com/macaca-sample/sample-nodejs"}},[a._v("sample-nodejs")]),a._v(")克隆到本地，然后按照如下命令即可下载已提供好的"),t("code",[a._v("示例 App")]),a._v("，并运行自动化测试。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装工具包和驱动")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i macaca-cli macaca-ios -g\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/macaca-sample/sample-nodejs.git --depth"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" sample-nodejs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装项目依赖")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run doctor\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run test:ios\n")])])]),t("h3",{attrs:{id:"执行测试用例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行测试用例"}},[a._v("#")]),a._v(" 执行测试用例")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# run test in current cwd")]),a._v("\n$ macaca run --verbose\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定测试文件目录及测试框架，此功能只支持 Node.js 版")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 目前支持 mocha, jasmine, tman 和 ava。")]),a._v("\n$ macaca run -d ./test -f mocha\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将结果导出为文件")]),a._v("\n$ macaca run -o\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 静默执行（只支持桌面浏览器）")]),a._v("\n$ macaca run --no-window\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用自定义的报告器")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CUSTOM_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("path/to/screenshot macaca run -d ./test --reporter macaca-simple-reportor\n")])])]),t("p",[t("code",[a._v("macaca-simple-reportor")]),a._v(" 是自定义报告器的一个示例，可以作为参考。")]),a._v(" "),t("p",[a._v("如果想要测试 Electron App 桌面应用，可以运行这个示例，将 ("),t("a",{attrs:{href:"//github.com/macaca-sample/macaca-electron-app-sample"}},[a._v("macaca-electron-app-sample")]),a._v(")克隆到本地，然后按照如下命令即可下载已提供好的"),t("code",[a._v("Eelectron.App")]),a._v("，并运行自动化测试。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装项目依赖")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run dist\n")])])]),t("h3",{attrs:{id:"执行-electron-app-测试用例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行-electron-app-测试用例"}},[a._v("#")]),a._v(" 执行 Electron App 测试用例")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Mac")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run mac-start\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Windows")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run win-start\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run win-server\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n")])])]),t("h3",{attrs:{id:"配置示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置示例"}},[a._v("#")]),a._v(" 配置示例")]),a._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("describe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test electron.app'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("before")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" driver\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("platformName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'desktop'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//设置支持 Desktop 参数")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("browserName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'chrome'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//设置支持 Eletron 参数")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("chromeOptions")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//设置chromeDriver chromeOptions object 参数")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("binary")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/Applications/macaca-electron-builder.app/Contents/MacOS/macaca-electron-builder'")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 填写自己的执行文件路径或者安装之后的文件路径")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("it")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'click link'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" driver\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("waitForElementById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'macacaId'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("click")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("h3",{attrs:{id:"只启动服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#只启动服务器"}},[a._v("#")]),a._v(" 只启动服务器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 普通用法，添加了 --verbose 可以看到详细的信息")]),a._v("\n$ macaca server --verbose\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置端口号")]),a._v("\n$ macaca server -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3456")]),a._v("\n")])])]),t("h3",{attrs:{id:"检查当前-macaca-的安装环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检查当前-macaca-的安装环境"}},[a._v("#")]),a._v(" 检查当前 Macaca 的安装环境")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ macaca doctor\n")])])]),t("h3",{attrs:{id:"更多的选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更多的选项"}},[a._v("#")]),a._v(" 更多的选项")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ macaca -h\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 服务器相关选项")]),a._v("\n$ macaca server -h\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如何执行用例的选项")]),a._v("\n$ macaca run -h\n\n")])])]),t("p",[t("strong",[a._v("注：")]),a._v(" 相比桌面浏览器，移动 App 测试有更多环境上的要求，如果没有看到预期的效果一般都是简单的坏境问题导致的，可以看下面提供的示例视频进行了解，更多关于环境的配置可以参考"),t("a",{attrs:{href:"./environment-setup"}},[a._v("环境配置")]),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"多语言栈"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多语言栈"}},[a._v("#")]),a._v(" 多语言栈")]),a._v(" "),t("p",[a._v("如上示例基于 Node.js 开发平台，Macaca 也提供多语言栈支持，请阅读"),t("a",{attrs:{href:"./multi-lang"}},[a._v("多语言")]),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"示例集合"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例集合"}},[a._v("#")]),a._v(" 示例集合")]),a._v(" "),t("p",[a._v("更多的示例请访问"),t("a",{attrs:{href:"//github.com/macaca-sample"}},[a._v("macaca-sample")]),a._v("。")]),a._v(" "),t("h2",{attrs:{id:"视频演示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#视频演示"}},[a._v("#")]),a._v(" 视频演示")]),a._v(" "),t("h3",{attrs:{id:"ios-应用测试-含-webview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios-应用测试-含-webview"}},[a._v("#")]),a._v(" iOS 应用测试(含 WebView)")]),a._v(" "),t("p",[t("video",{attrs:{src:"//os.alipayobjects.com/rmsportal/fyuMolxdSsGMlNw.mp4",controls:"controls",preload:"auto",controlslist:"nodownload"}})]),a._v(" "),t("h3",{attrs:{id:"ios-手机端浏览器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios-手机端浏览器"}},[a._v("#")]),a._v(" iOS 手机端浏览器")]),a._v(" "),t("p",[t("video",{attrs:{src:"//os.alipayobjects.com/rmsportal/TDeTXmTfeqRlxhj.mp4",controls:"controls",preload:"auto",controlslist:"nodownload"}})]),a._v(" "),t("h3",{attrs:{id:"android-应用测试-含-webview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android-应用测试-含-webview"}},[a._v("#")]),a._v(" Android 应用测试(含 WebView)")]),a._v(" "),t("p",[t("video",{attrs:{src:"//os.alipayobjects.com/rmsportal/vjoZfJaZmCvInDv.mp4",controls:"controls",preload:"auto",controlslist:"nodownload"}})]),a._v(" "),t("h3",{attrs:{id:"android-手机端浏览器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android-手机端浏览器"}},[a._v("#")]),a._v(" Android 手机端浏览器")]),a._v(" "),t("p",[t("video",{attrs:{src:"//os.alipayobjects.com/rmsportal/VoxFKOVDsOjKyMs.mp4",controls:"controls",preload:"auto",controlslist:"nodownload"}})]),a._v(" "),t("h3",{attrs:{id:"桌面端-electron"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#桌面端-electron"}},[a._v("#")]),a._v(" 桌面端 (Electron)")]),a._v(" "),t("p",[t("video",{attrs:{src:"//os.alipayobjects.com/rmsportal/bgBKHXYSrlYpuvv.mp4",controls:"controls",preload:"auto",controlslist:"nodownload"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);